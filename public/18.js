(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{357:function(t,a,s){"use strict";var e=s(59);s.n(e).a},358:function(t,a,s){(t.exports=s(6)(!1)).push([t.i,"\nth {\n    padding: 7px !important;\n}\n",""])},415:function(t,a,s){"use strict";s.r(a);var e=s(1),l=s(2),o=s(0),i=s.n(o);function n(t,a){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(t);a&&(e=e.filter((function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable}))),s.push.apply(s,e)}return s}function r(t,a,s){return a in t?Object.defineProperty(t,a,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[a]=s,t}var c={data:function(){return{details_view:!1,rules:{periodo:[{required:!0,message:"Este campo es obligatorio",trigger:"change"}],del:[{required:!0,message:"Este campo es obligatorio",trigger:"change"}],al:[{required:!0,message:"Este campo es obligatorio",trigger:"change"}]},alert:{message:null,show:!1},items:[],totales:{ts_inicial:0,ts_entrada:0,ts_salida:0,ts_final:0,l1s_inicial:0,l2s_inicial:0,l3s_inicial:0,l1s_entradas:0,l2s_entradas:0,l3s_entradas:0,l1s_salidas:0,l2s_salidas:0,l3s_salidas:0,l1s_final:0,l2s_final:0,l3s_final:0},self:null,pageOfItems:[],sizePerPage:10,perpage:5,labels:{first:"<<",last:">>",previous:"anterior",next:"siguiente"},consulta:{formato:"A",del:null,al:null,periodo:null},searchQuery:"",loading:!1}},computed:function(t){for(var a=1;a<arguments.length;a++){var s=null!=arguments[a]?arguments[a]:{};a%2?n(Object(s),!0).forEach((function(a){r(t,a,s[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):n(Object(s)).forEach((function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(s,a))}))}return t}({hola:function(){return this.hola},PerPage:function(){return this.perpage?parseInt(this.perpage):25},GET_FILTER_ITEMS:function(){var t=this;return this.items.filter((function(a){var s=new RegExp(t.searchQuery,"i");return s.test(a.partida)||s.test(a.articulo)}))}},Object(e.c)("periodo",["GET_ITEMS_PERIODO"])),methods:{refresh:function(){var t=this.$refs;setTimeout((function(){t.jw.setPage(1)}),0)},GET_ITEMS_REMA:function(t){var a=this;this.$refs[t].validate((function(t){if(a.loading=!0,!t)return a.loading=!1,!1;a.consulta.al=i()(a.consulta.al).format("YYYY-MM-DD"),a.consulta.del=i()(a.consulta.del).format("YYYY-MM-DD 00:00:00"),a.$Progress.start(),axios.post("/controller/reportes/saldos_almacen/",a.consulta).then((function(t){a.items=t.data.data,a.totales.ts_inicial=t.data.ts_inicial,a.totales.ts_entrada=t.data.ts_entrada,a.totales.ts_salida=t.data.ts_salida,a.totales.ts_final=t.data.ts_final,a.totales.l1s_inicial=t.data.l1s_inicial,a.totales.l2s_inicial=t.data.l2s_inicial,a.totales.l3s_inicial=t.data.l3s_inicial,a.totales.l1s_final=t.data.l1s_final,a.totales.l2s_final=t.data.l2s_final,a.totales.l3s_final=t.data.l3s_final,a.totales.l1s_entradas=t.data.l1s_entradas,a.totales.l2s_entradas=t.data.l2s_entradas,a.totales.l3s_entradas=t.data.l3s_entradas,a.totales.l1s_salidas=t.data.l1s_salidas,a.totales.l2s_salidas=t.data.l2s_salidas,a.totales.l3s_salidas=t.data.l3s_salidas,a.$Progress.finish(),a.loading=!1})).catch((function(t){a.loading=!1,a.$Progress.fail()}))}))},onChangePage:function(t){this.pageOfItems=t},findPeriodo:function(t){return l.a.getters["periodo/GET_ITEMS_PERIODO"].find((function(a){return a.id===t}))},Print:function(){this.consulta.del=i()(this.consulta.del).format("YYYY-MM-DD 00:00:00"),this.consulta.al=i()(this.consulta.al).format("YYYY-MM-DD"),window.open("http://localhost:8000/controller/reportes/movimiento_almacen_print?periodo="+this.consulta.periodo+"&del="+this.consulta.del+"&al="+this.consulta.al+"&formato="+this.consulta.formato,"_blank")},toExcel:function(){var t=this;this.consulta.del=i()(this.consulta.del).format("YYYY-MM-DD 00:00:00"),this.consulta.al=i()(this.consulta.al).format("YYYY-MM-DD"),axios.post("/controller/reportes/movimiento_almacen_excel",this.consulta,{responseType:"blob"}).then((function(a){var s=new Blob([a.data],{type:"application/vnd.ms-excel"}),e=document.createElement("a");e.href=URL.createObjectURL(s),e.setAttribute("download","Mov_alm_form_"+t.consulta.formato+".xlsx"),e.click(),URL.revokeObjectURL(e.href)})).catch((function(t){console.log("error excel",t)}))}},mounted:function(){l.a.dispatch("periodo/getItems")}},_=(s(357),s(3)),d=Object(_.a)(c,(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{},[t.alert.show?s("el-alert",{attrs:{title:"Ooops",type:"danger",description:t.alert.message,closable:"","show-icon":""},on:{close:function(a){t.alert.show=!1}}}):t._e(),t._v(" "),s("el-alert",{attrs:{type:"info",closable:!1,effect:"dark"}},[s("template",{slot:"title"},[s("span",{staticClass:"font-weight-bold",staticStyle:{"font-size":"15px"}},[t._v(" Reporte Estado de Movimiento de Almacen de Materiales y Suministros")])])],2),t._v(" "),s("div",{staticClass:"row row justify-content-between mr-1 ml-1  mt-4"},[s("div",{staticClass:"pull-left"},[s("el-form",{ref:"QueryForm",staticClass:"demo-form-inline",attrs:{inline:!0,rules:t.rules,model:t.consulta}},[s("el-form-item",{attrs:{label:"Periodo:",prop:"periodo"}},[s("el-select",{staticStyle:{width:"180px"},attrs:{filterable:"","loading-text":"buscando..","no-match-text":"No se encontraron registros",placeholder:"Seleccione periodo"},model:{value:t.consulta.periodo,callback:function(a){t.$set(t.consulta,"periodo",a)},expression:"consulta.periodo"}},t._l(t.GET_ITEMS_PERIODO,(function(t,a){return s("el-option",{key:a,attrs:{label:t.nombre,value:t.id}})})),1)],1),t._v(" "),s("el-form-item",{attrs:{label:"Del",prop:"del"}},[s("el-date-picker",{staticStyle:{width:"160px"},attrs:{type:"date",placeholder:"Seleccione dia"},model:{value:t.consulta.del,callback:function(a){t.$set(t.consulta,"del",a)},expression:"consulta.del"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"Al",prop:"al"}},[s("el-date-picker",{staticStyle:{width:"160px"},attrs:{type:"date",placeholder:"Seleccione un dia"},model:{value:t.consulta.al,callback:function(a){t.$set(t.consulta,"al",a)},expression:"consulta.al"}})],1),t._v(" "),s("el-form-item",[s("el-button",{attrs:{loading:t.loading,type:"primary"},on:{click:function(a){return t.GET_ITEMS_REMA("QueryForm")}}},[t._v("Consultar")])],1)],1)],1),t._v(" "),s("div",{staticClass:"pull-right"},[s("el-button",{attrs:{type:"danger",disabled:!t.consulta.periodo||!t.consulta.del||!t.consulta.al},on:{click:t.Print}},[s("i",{staticClass:"fas fa-file-pdf"}),t._v(" Exp. Pdf")]),t._v(" "),s("el-button",{attrs:{type:"success",disabled:!t.consulta.periodo||!t.consulta.del||!t.consulta.al},on:{click:t.toExcel}},[s("i",{staticClass:"fas fa-file-excel"}),t._v(" Exp. Excel")])],1)]),t._v(" "),s("div",{staticClass:"row justify-content-between ml-1",staticStyle:{"margin-bottom":"-20px"}},[s("div",{staticClass:"pull-left"},[s("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[s("el-form-item",{attrs:{label:"Mostrar:"}},[s("el-select",{staticStyle:{width:"70px"},on:{change:function(a){return t.refresh()}},model:{value:t.perpage,callback:function(a){t.perpage=a},expression:"perpage"}},t._l([{value:5,label:"5"},{value:10,label:"10"},{value:25,label:"25"},{value:50,label:"50"},{value:100,label:"100"}],(function(t){return s("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),t._v(" "),s("el-form-item",{attrs:{label:"Formato:"}},[s("el-select",{staticStyle:{width:"120px"},attrs:{placeholder:"Selecione el formato"},on:{change:function(a){return t.refresh()}},model:{value:t.consulta.formato,callback:function(a){t.$set(t.consulta,"formato",a)},expression:"consulta.formato"}},t._l([{value:"A",label:"Formato A"},{value:"B",label:"Formato B"}],(function(t){return s("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)],1)],1),t._v(" "),s("div",{staticClass:"pull-right"},[s("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[s("el-form-item",{attrs:{label:"Buscar por:"}},[s("el-input",{attrs:{placeholder:"Articulo, partida",clearable:""},model:{value:t.searchQuery,callback:function(a){t.searchQuery=a},expression:"searchQuery"}},[s("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"prefix"},slot:"prefix"})])],1)],1)],1)]),t._v(" "),s("table",{staticClass:"table table-bordered text-center",staticStyle:{"background-color":"white","font-size":"12px"}},[s("thead",[s("tr",[s("th",{staticClass:"pa",attrs:{rowspan:"3",scope:"col"}},[t._v("N°")]),t._v(" "),s("th",{staticClass:"pa",attrs:{rowspan:"3",scope:"col"}},[t._v("Linea")]),t._v(" "),s("th",{staticClass:"pa",attrs:{rowspan:"3",scope:"col"}},[t._v("Partida")]),t._v(" "),s("th",{staticClass:"pa",attrs:{rowspan:"3",scope:"col"}},[t._v("Descripción")]),t._v(" "),s("th",{staticClass:"pa",attrs:{rowspan:"2",scope:"col"}},[t._v("Saldo inicial "),s("br"),t._v(" Al "+t._s(t._f("dateformat")(t.consulta.del)))]),t._v(" "),s("th",{staticClass:"pa",attrs:{rowspan:"2",scope:"col"}},[t._v("Saldo inicial "),s("br"),t._v(" Al "+t._s(t._f("dateformat")(t.consulta.del)))]),t._v(" "),"B"==t.consulta.formato?s("th",{staticClass:"pa",attrs:{colspan:"4",scope:"col"}},[t._v(t._s(t.consulta.periodo?"Movimiento durante "+t.findPeriodo(t.consulta.periodo).nombre:"Movimiento durante -"))]):t._e(),t._v(" "),s("th",{staticClass:"pa",attrs:{rowspan:"2",scope:"col"}},[t._v("Saldo final "),s("br"),t._v(" "+t._s(t._f("dateformat")(t.consulta.al)))]),t._v(" "),t._m(0),t._v(" "),s("th",{staticClass:"pa",attrs:{rowspan:"2",scope:"col"}},[t._v("Saldo final "),s("br"),t._v(" Al "+t._s(t._f("dateformat")(t.consulta.al)))])]),t._v(" "),s("tr",["B"==t.consulta.formato?s("th",{staticClass:"pa",attrs:{colspan:"2",scope:"col"}},[t._v("Entradas")]):t._e(),t._v(" "),"B"==t.consulta.formato?s("th",{staticClass:"pa",attrs:{colspan:"2",scope:"col"}},[t._v("Salidas")]):t._e()]),t._v(" "),s("tr",[s("th",{staticClass:"pa",attrs:{scope:"col"}},[t._v("Cantidad")]),t._v(" "),s("th",{staticClass:"pa",attrs:{scope:"col"}},[t._v("Bs")]),t._v(" "),"B"==t.consulta.formato?s("th",{staticClass:"pa",attrs:{scope:"col"}},[t._v("Cantidad")]):t._e(),t._v(" "),"B"==t.consulta.formato?s("th",{staticClass:"pa",attrs:{scope:"col"}},[t._v("Bs")]):t._e(),t._v(" "),"B"==t.consulta.formato?s("th",{staticClass:"pa",attrs:{scope:"col"}},[t._v("Cantidad")]):t._e(),t._v(" "),"B"==t.consulta.formato?s("th",{staticClass:"pa",attrs:{scope:"col"}},[t._v("Bs")]):t._e(),t._v(" "),s("th",{staticClass:"pa",attrs:{scope:"col"}},[t._v("Cantidad")]),t._v(" "),s("th",{staticClass:"pa",attrs:{scope:"col"}},[t._v("Bs")]),t._v(" "),s("th",{staticClass:"pa",attrs:{scope:"col"}},[t._v("Bs")])])]),t._v(" "),s("tbody",[t._l(t.pageOfItems,(function(a,e){return s("tr",{key:e},[s("th",{attrs:{scope:"row"}},[t._v(t._s(e+1))]),t._v(" "),s("td",[t._v(t._s(a.linea))]),t._v(" "),s("td",[t._v(t._s(a.partida))]),t._v(" "),s("td",[t._v(t._s(a.articulo))]),t._v(" "),s("td",[t._v(t._s(a.c_inicial))]),t._v(" "),s("td",[t._v(t._s(a.s_inicial.toFixed(2)))]),t._v(" "),"B"==t.consulta.formato?s("td",[t._v(t._s(a.c_entrada))]):t._e(),t._v(" "),"B"==t.consulta.formato?s("td",[t._v(t._s(a.s_entrada.toFixed(2)))]):t._e(),t._v(" "),"B"==t.consulta.formato?s("td",[t._v(t._s(a.c_salida))]):t._e(),t._v(" "),"B"==t.consulta.formato?s("td",[t._v(t._s(a.s_salida.toFixed(2)))]):t._e(),t._v(" "),s("td",[t._v(t._s(a.c_final))]),t._v(" "),s("td",[t._v(t._s(a.precio_u.toFixed(2)))]),t._v(" "),s("td",[t._v(t._s(a.s_final.toFixed(2)))])])})),t._v(" "),s("tr",[s("td",{staticClass:"font-weight-bold",attrs:{colspan:"4"}},[t._v(" TOTALES ")]),t._v(" "),s("td",{staticClass:"font-weight-bold"}),t._v(" "),s("td",{staticClass:"font-weight-bold"},[t._v(t._s(t.totales.ts_inicial.toFixed(2)))]),t._v(" "),"B"==t.consulta.formato?s("td",{staticClass:"font-weight-bold"}):t._e(),t._v(" "),"B"==t.consulta.formato?s("td",{staticClass:"font-weight-bold"},[t._v(t._s(t.totales.ts_entrada.toFixed(2)))]):t._e(),t._v(" "),"B"==t.consulta.formato?s("td",{staticClass:"font-weight-bold"}):t._e(),t._v(" "),"B"==t.consulta.formato?s("td",{staticClass:"font-weight-bold"},[t._v(t._s(t.totales.ts_salida.toFixed(2)))]):t._e(),t._v(" "),s("td",{staticClass:"font-weight-bold"}),t._v(" "),s("td",{staticClass:"font-weight-bold"}),t._v(" "),s("td",{staticClass:"font-weight-bold"},[t._v(t._s(t.totales.ts_final.toFixed(2)))])])],2)]),t._v(" "),s("div",{staticClass:"row justify-content-center mt-4"},[s("el-button",{on:{click:function(a){t.details_view=!0}}},[t._v("Ver Resumen "),s("i",{staticClass:"el-icon-view el-icon--right"})])],1),t._v(" "),s("div",{staticClass:"row justify-content-center mt-4"},[s("jw-pagination",{ref:"jw",attrs:{pageSize:t.PerPage,items:t.GET_FILTER_ITEMS,labels:t.labels},on:{changePage:t.onChangePage}})],1),t._v(" "),s("el-dialog",{attrs:{title:"Resumen de saldos",visible:t.details_view},on:{"update:visible":function(a){t.details_view=a}}},[s("table",{staticClass:"table table-bordered text-center",staticStyle:{"background-color":"white","font-size":"12px"}},[s("tr",[s("th",[t._v("LINEA")]),t._v(" "),s("th",[t._v("SALDO INICIAL AL "+t._s(t._f("dateformat")(t.consulta.del)))]),t._v(" "),"B"==t.consulta.formato?s("th",[t._v("INGRESOS")]):t._e(),t._v(" "),"B"==t.consulta.formato?s("th",[t._v("SALIDAS")]):t._e(),t._v(" "),s("th",[t._v("SALDO FINAL AL "+t._s(t._f("dateformat")(t.consulta.al)))])]),t._v(" "),s("tr",[s("th",{staticClass:"font-weight-normal"},[t._v("1")]),t._v(" "),s("th",{staticClass:"font-weight-normal"},[t._v(t._s(t.totales.l1s_inicial.toFixed(2)))]),t._v(" "),"B"==t.consulta.formato?s("th",{staticClass:"font-weight-normal"},[t._v(t._s(t.totales.l1s_entradas.toFixed(2)))]):t._e(),t._v(" "),"B"==t.consulta.formato?s("th",{staticClass:"font-weight-normal"},[t._v(t._s(t.totales.l1s_salidas.toFixed(2)))]):t._e(),t._v(" "),s("th",{staticClass:"font-weight-normal"},[t._v(t._s(t.totales.l1s_final.toFixed(2)))])]),t._v(" "),s("tr",[s("th",{staticClass:"font-weight-normal"},[t._v("2")]),t._v(" "),s("th",{staticClass:"font-weight-normal"},[t._v(t._s(t.totales.l2s_inicial))]),t._v(" "),"B"==t.consulta.formato?s("th",{staticClass:"font-weight-normal"},[t._v(t._s(t.totales.l2s_entradas.toFixed(2)))]):t._e(),t._v(" "),"B"==t.consulta.formato?s("th",{staticClass:"font-weight-normal"},[t._v(t._s(t.totales.l2s_salidas.toFixed(2)))]):t._e(),t._v(" "),s("th",{staticClass:"font-weight-normal"},[t._v(t._s(t.totales.l2s_final.toFixed(2)))])]),t._v(" "),s("tr",[s("th",{staticClass:"font-weight-normal"},[t._v("3")]),t._v(" "),s("th",{staticClass:"font-weight-normal"},[t._v(t._s(t.totales.l3s_inicial.toFixed(2)))]),t._v(" "),"B"==t.consulta.formato?s("th",{staticClass:"font-weight-normal"},[t._v(t._s(t.totales.l3s_entradas.toFixed(2)))]):t._e(),t._v(" "),"B"==t.consulta.formato?s("th",{staticClass:"font-weight-normal"},[t._v(t._s(t.totales.l3s_salidas.toFixed(2)))]):t._e(),t._v(" "),s("th",{staticClass:"font-weight-normal"},[t._v(t._s(t.totales.l3s_final.toFixed(2)))])]),t._v(" "),s("tr",[s("th",{staticClass:"font-weight-bold"},[t._v("TOTALES")]),t._v(" "),s("th",{staticClass:"font-weight-bold"},[t._v(t._s(t.totales.ts_inicial.toFixed(2)))]),t._v(" "),"B"==t.consulta.formato?s("th",[t._v(t._s(t.totales.ts_entrada.toFixed(2)))]):t._e(),t._v(" "),"B"==t.consulta.formato?s("th",[t._v(t._s(t.totales.ts_salida.toFixed(2)))]):t._e(),t._v(" "),s("th",{staticClass:"font-weight-bold text-primary"},[t._v(t._s(t.totales.ts_final.toFixed(2)))])])])])],1)}),[function(){var t=this.$createElement,a=this._self._c||t;return a("th",{staticClass:"pa",attrs:{rowspan:"2",scope:"col"}},[this._v("Valor "),a("br"),this._v(" Unitario")])}],!1,null,null,null);a.default=d.exports},59:function(t,a,s){var e=s(358);"string"==typeof e&&(e=[[t.i,e,""]]);var l={hmr:!0,transform:void 0,insertInto:void 0};s(7)(e,l);e.locals&&(t.exports=e.locals)}}]);